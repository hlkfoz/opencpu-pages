--- 
layout: page 
title: "API Docs" 
---


<div class="row">
	<div class="col-md-3">
		<div id="docmenu" class="bs-sidebar hidden-print" data-spy="affix" data-offset-top="240" role="complementary">
			<ul class="nav bs-sidenav">
				<li><a href="#api-overview">Overview</a>
					<ul class="nav">
						<li><a href="#api-web">Web API</a></li>
						<li><a href="#api-functionality">Functionality</a></li>
						<li><a href="#api-state">Server State</a></li>
						<li><a href="#api-static">Static Content</a></li>
						<li><a href="#api-apps">Apps</a></li>
					</ul></li>	
					
        <li><a href="#api-http">HTTP</a>
          <ul class="nav">
            <li><a href="#api-methods">Methods</a></li>
            <li><a href="#api-statuscodes">Status Codes</a></li>
            <li><a href="#api-contenttypes">Content-types</a></li>
          </ul></li>    		
          				
				<li><a href="#api-endpoints">Endpoints</a>
					<ul class="nav">
						<li><a href="#api-libraries">Libraries</a></li>
						<li><a href="#api-packages">Packages</a></li>
						<li><a href="#api-objects">Objects</a></li>
						<li><a href="#api-manuals">Manuals</a></li>
						<li><a href="#api-sessions">Sessions</a></li>
					</ul></li>

        <li><a href="#tooltips">Output Formats</a>
          <ul class="nav">
            <li><a href="#tooltips-examples">Examples</a></li>
            <li><a href="#tooltips-usage">Usage</a></li>
          </ul></li>					

        <li><a href="#tooltips">Argument Formats</a>
          <ul class="nav">
            <li><a href="#tooltips-examples">Examples</a></li>
            <li><a href="#tooltips-usage">Usage</a></li>
          </ul></li>      
					
        <li><a href="#tabs">JSON I/O</a>
          <ul class="nav">
            <li><a href="#tabs-examples">JSON input</a></li>
            <li><a href="#tabs-usage">JSON output</a></li>
          </ul></li>					
			</ul>
		</div>
	</div>
	<div class="col-md-9" role="main">
	
	    <div class="alert alert-warning">
	      <strong>Last updated: August 21</strong> The OpenCPU documentation and demo servers are in the process of being updated to the new
	      OpenCPU 1.0! This version is not backward compatible with 0.x (beta) series. A copy of the old site is still available
	      <a href="http://public.opencpu.org/legacy/" class="alert-link">here</a>.
	    </div> 

     <div class="panel panel-primary">
      <div class="panel-heading"><h4>The OpenCPU root path</h4></div>
      <div class="panel-body">
        <p>The root of the OpenCPU API is dynamic. It usually defaults to <code>/ocpu/</code>, however system administrators can change this.
        Clients should make the OpenCPU server address and root path configurable. In the examples below we assume the default <code>/ocpu/</code>.</p>
      </div>
    </div>
    
    <div class="panel panel-primary">
      <div class="panel-heading"><h4>HTTP Methods</h4></div>
      <div class="panel-body">
      
        <p>OpenCPU currently only uses HTTP methods <code>GET</code> and <code>POST</code>. GET is used to read a resource, and POST is to
        execute/call/run the resource. POST is only valid on scripts, reproducible documents and R functions.</p>
    
		    <table class="table table-bordered">
		      <thead>
		        <tr>
		          <th>Method</th>
		          <th>Target</th>
		          <th>Action</th>
		          <th>Arguments</th>          
		          <th>Example</th>
		        </tr>
		      </thead>
		      <tbody>
		        <tr>
		          <td><code>GET</code></td>
		          <td>object</td>
		          <td>read object</td>
		          <td>control output format</td>          
		          <td><code>GET /ocpu/library/datasets/R/mtcars/json</code></td>
		        </tr>
		        <tr>
		          <td><code>POST</code></td>
		          <td>object</td>
		          <td>call function</td>
		          <td>function arguments</td>
		          <td><code>POST /ocpu/library/stats/R/rnorm</code></td>
		        </tr>
            <tr>
              <td><code>GET</code></td>
              <td>file</td>
              <td>read file</td>
              <td>-</td>
              <td><code>GET /ocpu/library/MASS/NEWS</code> <br /> <code>GET /ocpu/library/MASS/scripts/</code></td>
            </tr>  		         
		        <tr>
		          <td><code>POST</code></td>
		          <td>file</td>
		          <td>run script</td>
		          <td>control interpreter </td>
		          <td><code>POST /ocpu/library/MASS/scripts/ch01.R</code> <br /><code>POST /ocpu/library/knitr/examples/knitr-minimal.Rmd</code></td>
		        </tr>                         
		      </tbody>
		    </table>
		    
{% highlight bash %}
#curl uses http get method by default
curl http://my.server.com/ocpu/library/datasets/R/mtcars/json
curl http://my.server.com/ocpu/library/MASS/NEWS
curl http://my.server.com/ocpu/library/MASS/scripts/

#curl uses http post method for -X POST or -d 'arg=postdata'
curl http://my.server.com/ocpu/library/MASS/scripts/ch01.R -X POST
curl http://my.server.com/ocpu/library/stats/R/rnorm -d 'n=10&mean=5'
{% endhighlight %}		    
		    
		  </div>
		</div>
    
    <div class="panel panel-primary">
      <div class="panel-heading"><h4>HTTP Status Codes</h4></div>
      <div class="panel-body">
      
        <p>These are common statuscodes returned by OpenCPU that the client should be able to interpret</p>
    
		    <table class="table table-bordered">
		      <thead>
		        <tr>
		          <th>HTTP Code</th>
		          <th>When</th>
		          <th>Returns</th>
		        </tr>
		      </thead>
		      <tbody>
		        <tr>
		          <td><code>200 OK</code></td>
		          <td>On successful GET request</td>
		          <td>Resource content</td>
		        </tr>
		         <tr>
		          <td><code>201 Created</code></td>
		          <td>On successful POST request</td>
		          <td>Output location</td>
		        </tr>
		        <tr>
		          <td><code>302 Found</code></td>
		          <td>Redirect</td>
		          <td>Redirect Location</td>
		        </tr>
		        <tr>
		          <td><code>400 Bad Request</code></td>
		          <td>R raised an error.</td>
		          <td>Error message in <code>text/plain</code></td>
		        </tr>  
		        <tr>
		          <td><code>502 Bad Gateway</code></td>
		          <td>Nginx (opencpu-cache) can't connect to OpenCPU server.</td>
		          <td>(admin needs to look in error logs)</td>
		        </tr>   
		        <tr>
		          <td><code>503 Bad Request</code></td>
		          <td>Serious problem with the server</td>
		          <td>(admin needs to look in error logs)</td>
		        </tr>                                                    
		      </tbody>
		    </table>
		  </div>
		</div>
         
    
    <!-- SECTION Endpoints --> 
    


    <div class="panel panel-primary">
      <div class="panel-heading"><h4>The API Libraries</h4></div>
       <div class="panel-body">
       
        <p>The following libraries hold packages and sessions that are available on the server</p>
    
		    <table class="table table-bordered">
		      <thead>
		        <tr>
		          <th>Path</th>
		          <th>What</th>
		        </tr>
		      </thead>
		      <tbody>
		        <tr>
		          <td><code>/ocpu/library/:pkgname/</code></td>
		          <td>Interfaces to R packages installed in one of the global libraries on the server.</td>
		        </tr>
		        <tr>
		          <td><code>/ocpu/user/:username/:pkgname/</code></td>
		          <td>Interfaces to R packages installed in the home library of <code>:username</code>.</td>
		        </tr>   
		        <tr>
		          <td><code>/ocpu/tmp/:sessionid/</code></td>
		          <td>Interfaces temporary sessions, usually the result of function/script executions.</td>
		        </tr>                                                                                             
		      </tbody>
		    </table>   
		    
{% highlight bash %}
#read packages
curl http://my.server.com/ocpu/library/MASS
curl http://my.server.com/ocpu/user/jeroen/somepackage
#read session
curl http://my.server.com/ocpu/tmp/x2c5ab8d4
{% endhighlight %}  		    
		    
		    <p>In addition, a server might have support for the following remote API's enabled:</p>
		    
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>Path</th>
              <th>What</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>/ocpu/cran/:pkgname/</code></td>
              <td>Interfaces to the R package <code>:pkgname</code> that is <i>current</i> on CRAN.</td>
            </tr>   
            <tr>
              <td><code>/ocpu/bioc/:pkgname/</code></td>
              <td>Interfaces to the R package <code>:pkgname</code> that is <i>current</i> on BioConductor.</td>
            </tr>  
            <tr>
              <td><code>/ocpu/github/:gituser/:pkgname/</code></td>
              <td>Interfaces to R package <code>:pkgname</code> in the <i>master branch</i> of the identically named repository from github user <code>:gituser</code>.</td>
            </tr>
            <tr>
              <td><code>/ocpu/gist/:gituser/:path/</code></td>
              <td>Interfaces to static files and directories which are located in the gist repository from github user <code>gituser</code>. This API does not support packages, just files (scripts, documents, etc)</td>
            </tr>                                                                                           
          </tbody>
        </table> 		
        
{% highlight bash %}
#read packages
curl http://my.server.com/ocpu/cran/plyr/
curl http://my.server.com/ocpu/github/hadley/
curl http://my.server.com/ocpu/github/hadley/plyr/
#read files
curl http://my.server.com/ocpu/gist/hadley/
{% endhighlight %}         
            
		  </div>
		</div> 
    
        
    <div class="panel panel-primary">
      <div class="panel-heading"><h4>The R package API</h4></div>
       <div class="panel-body">
		    
		    <p>Any of the libraries above that supports the <code>/:package/</code> API can call the following endpoints:</p>
		    
		    <table class="table table-bordered">
		      <thead>
		        <tr>
		          <th>Path</th>
		          <th>What</th>
		        </tr>
		      </thead>
		      <tbody>
		        <tr>
		          <td><code>../:pkgname/</code></td>
		          <td>Show information about this package.</td>
		        </tr>      
		        <tr>
		          <td><code>../:pkgname/R</code></td>
		          <td>Interfaces R objects exported by this package. See R object API.</td>
		        </tr>
		        <tr>
		          <td><code>../:pkgname/man/</code></td>
		          <td>Lists manuals (help pages) available in this package.</td>
		        </tr>   
		        <tr>
		          <td><code>../:pkgname/man/:topic/:manformat</code></td>
		          <td>Get help page about <code>topic</code> in output format <code>manformat</code>. Manual format must be one of <code>text</code>, <code>html</code>, <code>pdf</code></td>
		        </tr> 
            <tr>
              <td><code>../:pkgname/html</code></td>
              <td>Simulates the R-base html help pages (for backward compatibility).</td>
            </tr> 		        
		        <tr>
		          <td><code>../:pkgname/:path</code></td>
		          <td>For anything else, interfaces to the Files API for file <code>path</code> in the package installation directory.</td>
		        </tr>                                                                                                     
		      </tbody>
		    </table>    
		    
{% highlight bash %}
#read package resources
curl http://my.server.com/ocpu/library/MASS/
curl http://my.server.com/ocpu/library/MASS/R/
curl http://my.server.com/ocpu/library/MASS/R/rlm/print
curl http://my.server.com/ocpu/library/MASS/man/
curl http://my.server.com/ocpu/library/MASS/man/rlm/text
curl http://my.server.com/ocpu/library/MASS/man/rlm/html
curl http://my.server.com/ocpu/library/MASS/man/rlm/pdf

#read files included with this package
curl http://my.server.com/ocpu/library/MASS/scripts/
curl http://my.server.com/ocpu/library/MASS/scripts/ch01.R
curl http://my.server.com/ocpu/library/MASS/NEWS

#call a function from rlm manual
curl http://my.server.com/ocpu/library/MASS/R/rlm -d 'formula=stack.loss ~ .&data=stackloss&psi=psi.bisquare'

#run R script
curl http://my.server.com/ocpu/library/MASS/scripts/ch01.R -X POST

#read output (replace with returned sessionid)
curl http://my.server.com/ocpu/tmp/x0648ec6b/R/.val/print
{% endhighlight %}    		    
		        
      </div>
    </div>
    
    
    <div class="panel panel-primary">
      <div class="panel-heading"><h4>The R object API</h4></div>
       <div class="panel-body">
    
		    <p>The <code>/R</code> API is used to read R objects, or call R functions.</p>
		    
		    <table class="table table-bordered">
		      <thead>
		        <tr>
		          <th>Path</th>
		          <th>What</th>
		        </tr>
		      </thead>
		      <tbody>
		        <tr>
		          <td><code>../R/</code></td>
		          <td>List R objects in this package or session.</td>
		        </tr>  
		        <tr>
		          <td><code>../R/:object</code></td>
		          <td>Read R object in default format. If <code>object</code> is a function, it can be called using HTTP POST.</td>
		        </tr>            
		        <tr>
		          <td><code>../R/:object/:format</code></td>
		          <td>Retrieve an R object in a particular output format.</td>
		        </tr>                                                                                    
		      </tbody>
		    </table>          
		  </div>
		</div> 
    
    <div class="panel panel-primary">
      <div class="panel-heading"><h4>The R session API</h4></div>
       <div class="panel-body"> 
    
		    <p>Sessions are currently only used to store the output of a function/script call.</p>
		    
		    <table class="table table-bordered">
		      <thead>
		        <tr>
		          <th>Path</th>
		          <th>What</th>
		        </tr>
		      </thead>
		      <tbody>
		        <tr>
		          <td><code>/ocpu/tmp/:sessionid/</code></td>
		          <td>List available output for this session.</td>
		        </tr>  
		        <tr>
		          <td><code>/ocpu/tmp/:sessionid/R</code></td>
		          <td>Interfaces to the R API for R objects stored in this session.</td>
		        </tr>
		        <tr>
		          <td><code>/ocpu/tmp/:sessionid/graphics/</code></td>
		          <td>List graphics (plots) stored in this session.</td>
		        </tr>  
		        <tr>
		          <td><code>/ocpu/tmp/:sessionid/graphics/:n/:format</code></td>
		          <td>Retrieve plot number <code>:n</code> in output format <code>:format</code>. Format is usually one of <code>png</code>, <code>pdf</code> or <code>svg</code>. The <code>:n</code> is an integer or "last".</td>
		        </tr>    
		        <tr>
		          <td><code>/ocpu/tmp/:sessionid/source</code></td>
		          <td>Reads the input source code for this session.</td>
		        </tr>      
		        <tr>
		          <td><code>/ocpu/tmp/:sessionid/stdout</code></td>
		          <td>Shows text printed to STDOUT in this session.</td>
		        </tr>  
		        <tr>
		          <td><code>/ocpu/tmp/:sessionid/console</code></td>
		          <td>Shows the console input/output for this session (combines source and stdout)</td>
		        </tr>                       
		        <tr>
		          <td><code>/ocpu/tmp/:sessionid/zip</code></td>
		          <td>Download the entire session as a zip archive.</td>
		        </tr>
		        <tr>
		          <td><code>/ocpu/tmp/:sessionid/tar</code></td>
		          <td>Download the entire session as a gzipped tarball.</td>
		        </tr>
		        <tr>
		          <td><code>/ocpu/tmp/:sessionid/files/:path</code></td>
		          <td>Interfaces to the file API in the working dir of the session.</td>
		        </tr>                                         
		                                                                                   
		      </tbody>
		    </table> 
		  </div>
		</div>       
    
    <div class="panel panel-primary">
      <div class="panel-heading"><h4>Output formats for R objects</h4></div>
       <div class="panel-body"> 
    
		    <p>Any R object (including recorded graphics) can be retrieved in various output formats, indicated by <code>:format</code> in the API tables.</p>
		    
		    <table class="table table-bordered">
		      <thead>
		        <tr>
		          <th>Format</th>
		          <th>Content-type</th>
		          <th>Encoder (+args)</th>
		          <th>Data Frame</th>
		          <th>Matrix</th>
		          <th>List</th>
		          <th>Graphics</th>
		          <th>Other (function, S4)</th>
		        </tr>
		      </thead>
		      <tbody>
		        <tr>
		          <td><code>print</code></td>
		          <td>text/plain</td>
		          <td>base::print</td>
		          <td class="success"><i class="icon icon-check"></i></td>
		          <td class="success"><i class="icon icon-check"></i></td>
		          <td class="success"><i class="icon icon-check"></i></td>
		          <td class="danger"><i class="icon icon-minus-sign"></i></td>
		          <td class="success"><i class="icon icon-check"></i></td>
		        </tr>   
		        
		        <tr>
		          <td><code>json</code></td>
		          <td>application/json</td>
		          <td>RJSONIO::toJSON</td>
		          <td class="success"><i class="icon icon-check"></i></td>
		          <td class="success"><i class="icon icon-check"></i></td>
		          <td class="success"><i class="icon icon-check"></i></td>
		          <td class="danger"><i class="icon icon-minus-sign"></i></td>
		          <td class="danger"><i class="icon icon-minus-sign"></i></td>
		        </tr>      
		        
		        <tr>
		          <td><code>csv</code></td>
		          <td>text/csv</td>
		          <td>utils::write.csv</td>
		          <td class="success"><i class="icon icon-check"></i></td>
		          <td class="success"><i class="icon icon-check"></i></td>
		          <td class="danger"><i class="icon icon-minus-sign"></i></td>
		          <td class="danger"><i class="icon icon-minus-sign"></i></td>
		          <td class="danger"><i class="icon icon-minus-sign"></i></td>
		        </tr>  
		        
		        <tr>
		          <td><code>tab</code></td>
		          <td>text/plain</td>
		          <td>utils::write.table</td>
		          <td class="success"><i class="icon icon-check"></i></td>
		          <td class="success"><i class="icon icon-check"></i></td>
		          <td class="danger"><i class="icon icon-minus-sign"></i></td>
		          <td class="danger"><i class="icon icon-minus-sign"></i></td>
		          <td class="danger"><i class="icon icon-minus-sign"></i></td>
		        </tr>    
		        
		        <tr>
		          <td><code>rda</code></td>
		          <td>application/octet-stream</td>
		          <td>base::save</td>
		          <td class="success"><i class="icon icon-check"></i></td>
		          <td class="success"><i class="icon icon-check"></i></td>
		          <td class="success"><i class="icon icon-check"></i></td>
		          <td class="success"><i class="icon icon-check"></i></td>
		          <td class="success"><i class="icon icon-check"></i></td>
		        </tr>   
		        
		        <tr>
		          <td><code>rds</code></td>
		          <td>application/octet-stream</td>
		          <td>base::saveRDS</td>
		          <td class="success"><i class="icon icon-check"></i></td>
		          <td class="success"><i class="icon icon-check"></i></td>
		          <td class="success"><i class="icon icon-check"></i></td>
		          <td class="success"><i class="icon icon-check"></i></td>
		          <td class="success"><i class="icon icon-check"></i></td>
		        </tr>   
		        
		        <tr>
		          <td><code>png</code></td>
		          <td>image/png</td>
		          <td>grDevices::png</td>
		          <td class="danger"><i class="icon icon-minus-sign"></i></td>
		          <td class="danger"><i class="icon icon-minus-sign"></i></td>
		          <td class="danger"><i class="icon icon-minus-sign"></i></td>
		          <td class="success"><i class="icon icon-check"></i></td>
		          <td class="danger"><i class="icon icon-minus-sign"></i></td>
		        </tr>    
		        
		        <tr>
		          <td><code>pdf</code></td>
		          <td>application/pdf</td>
		          <td>grDevices::pdf</td>
		          <td class="danger"><i class="icon icon-minus-sign"></i></td>
		          <td class="danger"><i class="icon icon-minus-sign"></i></td>
		          <td class="danger"><i class="icon icon-minus-sign"></i></td>
		          <td class="success"><i class="icon icon-check"></i></td>
		          <td class="danger"><i class="icon icon-minus-sign"></i></td>
		        </tr>  
		        
		        <tr>
		          <td><code>svg</code></td>
		          <td>image/svg+xml</td>
		          <td>grDevices::svg</td>
		          <td class="danger"><i class="icon icon-minus-sign"></i></td>
		          <td class="danger"><i class="icon icon-minus-sign"></i></td>
		          <td class="danger"><i class="icon icon-minus-sign"></i></td>
		          <td class="success"><i class="icon icon-check"></i></td>
		          <td class="danger"><i class="icon icon-minus-sign"></i></td>
		        </tr>                                                                                            
		                                                                                   
		      </tbody>
		    </table>  
		    
{% highlight bash %}
#read R objects from packages.
curl http://my.server.com/ocpu/library/datasets/R/mtcars/json?digits=0
curl http://my.server.com/ocpu/library/datasets/R/mtcars/csv
curl http://my.server.com/ocpu/library/datasets/R/mtcars/tab?sep="|"
curl http://my.server.com/ocpu/library/MASS/R/loglm/print
{% endhighlight %}

{% highlight bash %}
#create a simple plot
curl http://my.server.com/ocpu/library/graphics/R/plot -d 'x=cars'
 
#replace session id with returned one
curl http://my.server.com/ocpu/tmp/x0468b7ab/graphics/last/png
curl http://my.server.com/ocpu/tmp/x0468b7ab/graphics/1/png?width=1000
curl http://my.server.com/ocpu/tmp/x0468b7ab/graphics/last/svg
curl http://my.server.com/ocpu/tmp/x0468b7ab/graphics/last/pdf?width=8
{% endhighlight %}         		    
		    
		  </div>
		</div>  
    
    
    <div class="panel panel-primary">
      <div class="panel-heading"><h4>Argument formats for R function calls (HTTP POST only)</h4></div>
       <div class="panel-body">
		    <p>When calling a function, we need to pass arguments. OpenCPU accepts the following types of arguments</p>
		    
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>Type</th>
              <th>What</th>
              <th>Examples</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Primitives</td>
              <td>Numbers, strings, booleans</td>
              <td><code>3.1415</code>, <code>false</code>, <code>"mytitle"</code></td>
            </tr>   

            <tr>
              <td>JSON object</td>
              <td>An array or object</td>
              <td><code>{"foo" : [1,2,3], "bar" : {"name" : "jerry"}}</code></td>
            </tr>  
            
            <tr>
              <td>R code</td>
              <td>plain R code</td>
              <td><code>paste("useR", "2013")</code>, <code>mtcars</code></td>
            </tr>  
            
            <tr>
              <td>File upload</td>
              <td>File argument will be temporary file path.</td>
              <td>(multipart only)</td>
            </tr>                                    
 
            <tr>
              <td>Chained Object</td>
              <td>Session ID from previous function call.</td>
              <td><code>x2ac58d69</code></td>
            </tr>                                                                                         
                                                                                       
          </tbody>
        </table> 		   
        
        <p>When performing a fucntion call, the POST data (request body) can be formated using either <code>multipart/form-data</code>, 
        <code>application/x-www-form-urlencoded</code> or <code>application/json</code>. Not every content-type supports any argument format:</p>
		    
		    <table class="table table-bordered">
		      <thead>
		        <tr>
		          <th>Content-type</th>
		          <th>Primitives</th>
		          <th>JSON object</th>
		          <th>R code</th>
		          <th>File upload</th>
		          <th>Chained object</th>
		        </tr>
		      </thead>
		      <tbody>
		        <tr>
		          <td><code>application/x-www-form-urlencoded</code></td>
		          <td class="success"><i class="icon icon-check"></i></td>
		          <td class="success"><i class="icon icon-check"></i></td>
		          <td class="success"><i class="icon icon-check"></i></td>
		          <td class="danger"><i class="icon icon-minus-sign"></i></td>
		          <td class="success"><i class="icon icon-check"></i></td>
		        </tr>   
		        
		         <tr>
		          <td><code>multipart/form-data</code></td>
		          <td class="success"><i class="icon icon-check"></i></td>
		          <td class="success"><i class="icon icon-check"></i></td>
		          <td class="success"><i class="icon icon-check"></i></td>
		          <td class="success"><i class="icon icon-check"></i></td>
		          <td class="success"><i class="icon icon-check"></i></td>
		        </tr>    
		        
		         <tr>
		          <td><code>application/json</code></td>
		          <td class="success"><i class="icon icon-check"></i></td>
		          <td class="success"><i class="icon icon-check"></i></td>
		          <td class="danger"><i class="icon icon-minus-sign"></i></td>
		          <td class="danger"><i class="icon icon-minus-sign"></i></td>
		          <td class="danger"><i class="icon icon-minus-sign"></i></td>
		        </tr>                                                                                               
		                                                                                   
		      </tbody>
		    </table>               
{% highlight bash %}
#call some functions
curl http://my.server.com/ocpu/library/stats/R/rnorm -d 'n=10&mean=5' 
curl http://my.server.com/ocpu/library/graphics/R/hist -d 'x=[2,3,2,3,4,3,3]&breaks=10'
curl http://my.server.com/ocpu/library/graphics/R/plot -d 'x=cars&main="test"'
curl http://my.server.com/ocpu/library/base/R/identity -d 'x=coef(lm(speed~dist, data=cars))'
{% endhighlight %} 

{% highlight bash %}
#upload local file mydata.csv
curl http://my.server.com/ocpu/library/utils/R/read.csv -F "file=@mydata.csv"

#replace session id with returned one above
curl http://my.server.com/ocpu/tmp/x067b4172/R/.val/print
curl http://my.server.com/ocpu/library/base/R/summary -d 'object=x067b4172'
{% endhighlight %} 

{% highlight bash %}
#post arguments in json
curl http://your.server.com/ocpu/library/stats/R/rnorm \
  -H "Content-Type: application/json" -d '{"n":10, "mean": 10, "sd":10}'
{% endhighlight %} 


      </div>        
    </div>
    
    <div class="panel panel-primary">
      <div class="panel-heading"><h4>Running scripts and reproducible documents</h4></div>
       <div class="panel-body">
    
        <p>We can run a script by performing HTTP POST on a file. The script is interpreted according to its (case insensitive) file extension. 
        Any HTTP POST arguments are passed on to the interpreting function. The following types are supported:</p>
        
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>File extension</th>
              <th>Type</th>
              <th>Interpreter</th>
              <th>Arguments</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>file.r</code></td>
              <td>R script</td>
              <td>evaluate::evaluate</td>
              <td>-</td>
            </tr>  
            
            <tr>
              <td><code>file.tex</code></td>
              <td>latex</td>
              <td>tools::texi2pdf</td>
              <td>-</td>
            </tr>            
            
            <tr>
              <td><code>file.rnw</code></td>
              <td>knitr/sweave</td>
              <td>knitr::knit + tools::texi2pdf</td>
              <td>-</td>
            </tr>
            
            <tr>
              <td><code>file.md</code></td>
              <td>markdown</td>
              <td>knitr::pandoc</td>
              <td><code>format</code> (see ?pandoc) </td>
            </tr>             
            
            <tr>
              <td><code>file.rmd</code></td>
              <td>knitr/markdown</td>
              <td>knitr::knit + knitr::pandoc</td>
              <td><code>format</code> (see ?pandoc) </td>
            </tr>    
            
            <tr>
              <td><code>file.brew</code></td>
              <td>brew</td>
              <td>brew::brew</td>
              <td><code>output</code> (see ?brew)</td>
            </tr>                                    
                                                                               
          </tbody>
        </table>
        
{% highlight bash %}
#run scripts which exist in packages
curl http://my.server.com/ocpu/library/MASS/scripts/ch01.R -X POST
curl http://my.server.com/ocpu/library/brew/featurefull.brew -X POST
curl http://my.server.com/ocpu/library/brew/brew-test-2.brew -d 'output=output.html'
curl http://my.server.com/ocpu/library/knitr/examples/knitr-minimal.Rmd -X POST
curl http://my.server.com/ocpu/library/knitr/examples/knitr-minimal.Rmd -d 'format=docx'
curl http://my.server.com/ocpu/library/knitr/examples/knitr-minimal.Rmd -d 'format=html'
curl http://my.server.com/ocpu/library/knitr/examples/knitr-minimal.Rnw 

#run scripts from gist
curl http://my.server.com/ocpu/gist/hadley/6195660/r-is-like.md -X POST
curl http://my.server.com/ocpu/gist/hadley/5721744/html.r -X POST
{% endhighlight %}         
                  
      </div>
    </div> 
    
     <div class="panel panel-primary">
      <div class="panel-heading"><h4>JSON I/O RPC (Data Processing Units)</h4></div>
      <div class="panel-body">
			<p>In the common special case where the client wants to call an R function and is only interested in the JSON representation of the object
			returned by the function the HTTP POST request path can be post-fixed with <code>/json</code>. In this case, a successfull call will not 
			return 200 (instead of 201), and the response body contains the output from the function in JSON; no need for an additional GET request:</p>

{% highlight bash %}
curl http://your.server.com/ocpu/library/stats/R/rnorm/json -d n=2
 [
	-1.2804,
	-0.75013
 ]
{% endhighlight %}

      <p>We can combine this with the <code>application/json</code> request content type for full JSON RPC on R functions</p>
      
{% highlight bash %}
curl http://your.server.com/ocpu/library/stats/R/rnorm/json \
  -H "Content-Type: application/json" -d '{"n":3, "mean": 10, "sd":10}'
 [
  4.9829,
  6.3104,
  11.411
 ]  
{% endhighlight %}			
      </div>
    </div>    
    
        
	</div>
</div>

<script>
$(function(){
  $('body').scrollspy({ target: '#docmenu' })
});
</script>
